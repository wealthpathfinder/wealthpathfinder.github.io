<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Risk Tolerance Calculator - Financial Tools</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #8e2de2 0%, #4a00e0 100%);
            color: #333;
            line-height: 1.6;
            min-height: 100vh;
            padding: 20px;
        }

        .calculator-container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.15);
            overflow: hidden;
        }

        .calculator-header {
            background: #2c3e50;
            color: white;
            padding: 30px;
            text-align: center;
        }

        .calculator-header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .calculator-header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .calculator-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            padding: 40px;
        }

        @media (max-width: 768px) {
            .calculator-content {
                grid-template-columns: 1fr;
            }
        }

        .questionnaire-section {
            background: #f8f9fa;
            padding: 30px;
            border-radius: 10px;
            border: 1px solid #e9ecef;
        }

        .section-title {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
            color: #2c3e50;
            font-size: 1.4em;
        }

        .section-title i {
            color: #8e2de2;
        }

        .progress-container {
            margin-bottom: 30px;
        }

        .progress-bar {
            height: 10px;
            background: #e9ecef;
            border-radius: 5px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(135deg, #8e2de2 0%, #4a00e0 100%);
            width: 0%;
            transition: width 0.5s ease;
        }

        .progress-text {
            display: flex;
            justify-content: space-between;
            margin-top: 5px;
            font-size: 0.9em;
            color: #6c757d;
        }

        .question-container {
            margin-bottom: 30px;
        }

        .question-text {
            font-size: 1.2em;
            font-weight: 600;
            margin-bottom: 20px;
            color: #2c3e50;
        }

        .options-container {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .option {
            background: white;
            padding: 15px;
            border-radius: 8px;
            border: 2px solid #e9ecef;
            cursor: pointer;
            transition: all 0.3s;
        }

        .option:hover {
            border-color: #8e2de2;
            transform: translateY(-2px);
        }

        .option.selected {
            border-color: #8e2de2;
            background: rgba(142, 45, 226, 0.05);
        }

        .option-text {
            font-weight: 500;
            margin-bottom: 5px;
        }

        .option-desc {
            font-size: 0.9em;
            color: #6c757d;
        }

        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }

        .nav-btn {
            padding: 12px 25px;
            background: #8e2de2;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s;
        }

        .nav-btn:hover {
            background: #4a00e0;
            transform: translateY(-2px);
        }

        .nav-btn:disabled {
            background: #95a5a6;
            cursor: not-allowed;
            transform: none;
        }

        .results-section {
            background: white;
            padding: 30px;
            border-radius: 10px;
            border: 1px solid #e9ecef;
        }

        .risk-profile {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
        }

        .risk-level {
            font-size: 2.5em;
            font-weight: 800;
            margin: 10px 0;
        }

        .risk-description {
            font-size: 1.2em;
            color: #6c757d;
        }

        .risk-meter {
            height: 20px;
            background: linear-gradient(90deg, #2ecc71, #f39c12, #e74c3c);
            border-radius: 10px;
            margin: 20px 0;
            position: relative;
        }

        .risk-indicator {
            position: absolute;
            top: -5px;
            width: 30px;
            height: 30px;
            background: white;
            border: 3px solid #2c3e50;
            border-radius: 50%;
            transform: translateX(-50%);
            transition: left 1s ease;
        }

        .risk-labels {
            display: flex;
            justify-content: space-between;
            margin-top: 5px;
            font-size: 0.9em;
            color: #6c757d;
        }

        .results-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }

        .result-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            border-left: 4px solid #8e2de2;
        }

        .result-card h3 {
            font-size: 0.9em;
            color: #6c757d;
            margin-bottom: 10px;
        }

        .result-card .value {
            font-size: 1.8em;
            font-weight: 700;
            color: #2c3e50;
        }

        .chart-container {
            height: 300px;
            margin: 30px 0;
        }

        .portfolio-allocation {
            margin-top: 30px;
        }

        .allocation-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        .allocation-table th,
        .allocation-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #e9ecef;
        }

        .allocation-table th {
            background: #f8f9fa;
            font-weight: 600;
            color: #2c3e50;
        }

        .allocation-bar {
            height: 10px;
            background: #e9ecef;
            border-radius: 5px;
            overflow: hidden;
        }

        .allocation-fill {
            height: 100%;
            border-radius: 5px;
        }

        .insights-section {
            background: #e8f4fd;
            padding: 25px;
            border-radius: 10px;
            margin-top: 30px;
            border-left: 4px solid #3498db;
        }

        .insights-section h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .insight-item {
            margin-bottom: 15px;
            padding-left: 20px;
            border-left: 3px solid #8e2de2;
        }

        .action-buttons {
            display: flex;
            gap: 15px;
            margin-top: 30px;
        }

        .print-btn, .reset-btn {
            padding: 12px 25px;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s;
        }

        .print-btn {
            background: #3498db;
            color: white;
        }

        .reset-btn {
            background: #95a5a6;
            color: white;
        }

        .print-btn:hover, .reset-btn:hover {
            transform: translateY(-2px);
        }

        .investment-strategies {
            margin-top: 30px;
        }

        .strategy-card {
            background: white;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 15px;
            border: 1px solid #e9ecef;
            cursor: pointer;
            transition: all 0.3s;
        }

        .strategy-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .strategy-card.selected {
            border-color: #8e2de2;
            background: rgba(142, 45, 226, 0.05);
        }

        .strategy-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .strategy-title {
            font-weight: 600;
            color: #2c3e50;
        }

        .strategy-risk {
            font-size: 0.9em;
            padding: 4px 10px;
            border-radius: 20px;
            font-weight: 600;
        }

        .risk-conservative {
            background: #2ecc71;
            color: white;
        }

        .risk-moderate {
            background: #f39c12;
            color: white;
        }

        .risk-aggressive {
            background: #e74c3c;
            color: white;
        }

        .strategy-desc {
            color: #7f8c8d;
            font-size: 0.9em;
        }

        .completion-screen {
            text-align: center;
            padding: 40px 20px;
        }

        .completion-icon {
            font-size: 4em;
            color: #8e2de2;
            margin-bottom: 20px;
        }

        .completion-title {
            font-size: 2em;
            font-weight: 700;
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .completion-text {
            font-size: 1.2em;
            color: #6c757d;
            margin-bottom: 30px;
        }
    </style>
</head>
<body>
    <div class="calculator-container">
        <div class="calculator-header">
            <h1>Risk Tolerance Calculator</h1>
            <p>Discover your investment risk profile and get personalized portfolio recommendations</p>
        </div>

        <div class="calculator-content">
            <div class="questionnaire-section">
                <div class="section-title">
                    <i class="fas fa-clipboard-list"></i>
                    <h2>Risk Assessment Questionnaire</h2>
                </div>
                
                <div class="progress-container">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progress-fill"></div>
                    </div>
                    <div class="progress-text">
                        <span>Question <span id="current-question">1</span> of 10</span>
                        <span id="progress-percent">10%</span>
                    </div>
                </div>

                <div id="question-container">
                    <!-- Questions will be dynamically inserted here -->
                </div>

                <div class="navigation-buttons">
                    <button class="nav-btn" id="prev-btn" onclick="previousQuestion()" disabled>
                        <i class="fas fa-arrow-left"></i> Previous
                    </button>
                    <button class="nav-btn" id="next-btn" onclick="nextQuestion()">
                        Next <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>

            <div class="results-section">
                <div class="section-title">
                    <i class="fas fa-chart-pie"></i>
                    <h2>Your Risk Profile</h2>
                </div>
                
                <div class="risk-profile">
                    <h3>Your Risk Tolerance Level</h3>
                    <div class="risk-level" id="risk-level">Conservative</div>
                    <div class="risk-description" id="risk-description">You prefer safety and stability over high returns</div>
                    
                    <div class="risk-meter">
                        <div class="risk-indicator" id="risk-indicator" style="left: 10%;"></div>
                    </div>
                    <div class="risk-labels">
                        <span>Conservative</span>
                        <span>Moderate</span>
                        <span>Aggressive</span>
                    </div>
                </div>

                <div class="results-grid">
                    <div class="result-card">
                        <h3>Risk Score</h3>
                        <div class="value" id="risk-score">25/100</div>
                    </div>
                    <div class="result-card">
                        <h3>Recommended Portfolio</h3>
                        <div class="value" id="portfolio-type">Income</div>
                    </div>
                    <div class="result-card">
                        <h3>Expected Return</h3>
                        <div class="value" id="expected-return">4-6%</div>
                    </div>
                    <div class="result-card">
                        <h3>Max Drawdown</h3>
                        <div class="value" id="max-drawdown">-10%</div>
                    </div>
                </div>

                <div class="chart-container">
                    <canvas id="portfolioChart"></canvas>
                </div>

                <div class="portfolio-allocation">
                    <h3>Recommended Portfolio Allocation</h3>
                    <table class="allocation-table">
                        <thead>
                            <tr>
                                <th>Asset Class</th>
                                <th>Allocation</th>
                                <th>Risk Level</th>
                            </tr>
                        </thead>
                        <tbody id="allocation-body">
                            <!-- Will be populated by JavaScript -->
                        </tbody>
                    </table>
                </div>

                <div class="investment-strategies">
                    <h3>Investment Strategy Options</h3>
                    <div class="strategy-card" onclick="selectStrategy('conservative')">
                        <div class="strategy-header">
                            <div class="strategy-title">Conservative Portfolio</div>
                            <div class="strategy-risk risk-conservative">Low Risk</div>
                        </div>
                        <div class="strategy-desc">
                            Focus on capital preservation with stable, income-generating assets
                        </div>
                    </div>
                    <div class="strategy-card" onclick="selectStrategy('moderate')">
                        <div class="strategy-header">
                            <div class="strategy-title">Moderate Portfolio</div>
                            <div class="strategy-risk risk-moderate">Medium Risk</div>
                        </div>
                        <div class="strategy-desc">
                            Balanced approach with mix of growth and income assets
                        </div>
                    </div>
                    <div class="strategy-card" onclick="selectStrategy('aggressive')">
                        <div class="strategy-header">
                            <div class="strategy-title">Aggressive Portfolio</div>
                            <div class="strategy-risk risk-aggressive">High Risk</div>
                        </div>
                        <div class="strategy-desc">
                            Growth-focused with higher potential returns and volatility
                        </div>
                    </div>
                </div>

                <div class="insights-section">
                    <h3><i class="fas fa-lightbulb"></i> Risk Management Insights</h3>
                    <div class="insight-item">
                        <strong>Diversification:</strong> Spread your investments across different asset classes to reduce risk.
                    </div>
                    <div class="insight-item">
                        <strong>Time Horizon:</strong> The longer your investment timeline, the more risk you can typically afford.
                    </div>
                    <div class="insight-item">
                        <strong>Rebalancing:</strong> Regularly adjust your portfolio to maintain your target asset allocation.
                    </div>
                    <div class="insight-item">
                        <strong>Emergency Fund:</strong> Maintain 3-6 months of expenses in cash for unexpected needs.
                    </div>
                </div>

                <div class="action-buttons">
                    <button class="print-btn" onclick="window.print()">
                        <i class="fas fa-print"></i> Print Results
                    </button>
                    <button class="reset-btn" onclick="resetCalculator()">
                        <i class="fas fa-redo"></i> Retake Assessment
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Risk assessment questions
        const questions = [
            {
                text: "What is your primary investment goal?",
                options: [
                    { text: "Preserve my capital with minimal risk", score: 1, desc: "Safety is my top priority" },
                    { text: "Generate steady income with some growth", score: 2, desc: "Balance between income and growth" },
                    { text: "Achieve moderate growth with some volatility", score: 3, desc: "Willing to accept some ups and downs" },
                    { text: "Maximize long-term growth potential", score: 4, desc: "Comfortable with significant volatility" },
                    { text: "Aggressive growth with maximum returns", score: 5, desc: "Willing to take substantial risks for high returns" }
                ]
            },
            {
                text: "What is your investment time horizon?",
                options: [
                    { text: "Less than 2 years", score: 1, desc: "Short-term needs" },
                    { text: "2-5 years", score: 2, desc: "Medium-term goals" },
                    { text: "5-10 years", score: 3, desc: "Long-term planning" },
                    { text: "10-15 years", score: 4, desc: "Retirement planning" },
                    { text: "More than 15 years", score: 5, desc: "Very long-term wealth building" }
                ]
            },
            {
                text: "How would you react if your portfolio lost 20% in a year?",
                options: [
                    { text: "Sell all investments to avoid further losses", score: 1, desc: "Very concerned about losses" },
                    { text: "Sell some investments and move to safer assets", score: 2, desc: "Moderately concerned" },
                    { text: "Hold investments and wait for recovery", score: 3, desc: "Neutral - expect markets to recover" },
                    { text: "Buy more investments while prices are low", score: 4, desc: "See it as a buying opportunity" },
                    { text: "Significantly increase my investment amount", score: 5, desc: "Aggressively buy the dip" }
                ]
            },
            {
                text: "What percentage of your income do you save and invest?",
                options: [
                    { text: "Less than 5%", score: 1, desc: "Minimal savings" },
                    { text: "5-10%", score: 2, desc: "Moderate savings rate" },
                    { text: "10-15%", score: 3, desc: "Good savings discipline" },
                    { text: "15-20%", score: 4, desc: "Strong savings habit" },
                    { text: "More than 20%", score: 5, desc: "Excellent savings rate" }
                ]
            },
            {
                text: "How experienced are you with investing?",
                options: [
                    { text: "No experience - I'm new to investing", score: 1, desc: "Beginner investor" },
                    { text: "Limited experience - I've made a few investments", score: 2, desc: "Some investing experience" },
                    { text: "Moderate experience - I regularly manage investments", score: 3, desc: "Comfortable with investing" },
                    { text: "Experienced - I'm knowledgeable about different assets", score: 4, desc: "Confident investor" },
                    { text: "Very experienced - I actively manage a diverse portfolio", score: 5, desc: "Sophisticated investor" }
                ]
            },
            {
                text: "What is your current financial situation?",
                options: [
                    { text: "Living paycheck to paycheck", score: 1, desc: "Limited financial flexibility" },
                    { text: "Some savings but limited emergency fund", score: 2, desc: "Basic financial security" },
                    { text: "Adequate emergency fund and some investments", score: 3, desc: "Financially stable" },
                    { text: "Substantial savings and diversified investments", score: 4, desc: "Strong financial position" },
                    { text: "Significant wealth and multiple income streams", score: 5, desc: "Wealthy with high risk capacity" }
                ]
            },
            {
                text: "How important is it that your investments generate regular income?",
                options: [
                    { text: "Extremely important - I rely on investment income", score: 1, desc: "Income is critical" },
                    { text: "Very important - supplements my other income", score: 2, desc: "Income is a key factor" },
                    { text: "Moderately important - nice to have but not essential", score: 3, desc: "Balanced approach" },
                    { text: "Somewhat important - growth is more important", score: 4, desc: "Growth-focused with some income" },
                    { text: "Not important - I'm focused entirely on growth", score: 5, desc: "Pure growth orientation" }
                ]
            },
            {
                text: "How would you describe your knowledge of financial markets?",
                options: [
                    { text: "Very limited - I don't follow financial news", score: 1, desc: "Minimal market knowledge" },
                    { text: "Basic - I understand simple concepts", score: 2, desc: "Fundamental understanding" },
                    { text: "Moderate - I follow markets occasionally", score: 3, desc: "Reasonable market awareness" },
                    { text: "Good - I regularly follow financial news", score: 4, desc: "Well-informed about markets" },
                    { text: "Expert - I deeply understand market dynamics", score: 5, desc: "Advanced market knowledge" }
                ]
            },
            {
                text: "How would you allocate $100,000 among these options?",
                options: [
                    { text: "$90K in savings, $10K in conservative bonds", score: 1, desc: "Extremely conservative" },
                    { text: "$70K in bonds, $30K in blue-chip stocks", score: 2, desc: "Conservative with some growth" },
                    { text: "$50K in bonds, $50K in diversified stocks", score: 3, desc: "Balanced approach" },
                    { text: "$30K in bonds, $70K in growth stocks", score: 4, desc: "Growth-oriented" },
                    { text: "$10K in bonds, $90K in aggressive growth stocks", score: 5, desc: "Very aggressive" }
                ]
            },
            {
                text: "During market downturns, what is your primary concern?",
                options: [
                    { text: "Losing my initial investment", score: 1, desc: "Capital preservation is key" },
                    { text: "Not having enough safe assets", score: 2, desc: "Security during volatility" },
                    { text: "Missing recovery opportunities", score: 3, desc: "Balanced perspective" },
                    { text: "Not buying enough at lower prices", score: 4, desc: "Opportunity-focused" },
                    { text: "Underperforming the market during recovery", score: 5, desc: "Maximizing returns" }
                ]
            }
        ];

        let currentQuestion = 0;
        let userAnswers = [];
        let totalScore = 0;
        let portfolioChart;

        // Initialize the questionnaire
        function initQuestionnaire() {
            showQuestion(currentQuestion);
            updateProgress();
        }

        // Display the current question
        function showQuestion(index) {
            const questionContainer = document.getElementById('question-container');
            const question = questions[index];
            
            let optionsHTML = '';
            question.options.forEach((option, i) => {
                const isSelected = userAnswers[index] === i;
                optionsHTML += `
                    <div class="option ${isSelected ? 'selected' : ''}" onclick="selectOption(${i})">
                        <div class="option-text">${option.text}</div>
                        <div class="option-desc">${option.desc}</div>
                    </div>
                `;
            });
            
            questionContainer.innerHTML = `
                <div class="question-text">${question.text}</div>
                <div class="options-container">
                    ${optionsHTML}
                </div>
            `;
            
            // Update navigation buttons
            document.getElementById('prev-btn').disabled = index === 0;
            document.getElementById('next-btn').disabled = userAnswers[index] === undefined;
            
            if (index === questions.length - 1 && userAnswers[index] !== undefined) {
                document.getElementById('next-btn').innerHTML = 'See Results <i class="fas fa-chart-bar"></i>';
            } else {
                document.getElementById('next-btn').innerHTML = 'Next <i class="fas fa-arrow-right"></i>';
            }
        }

        // Select an option for the current question
        function selectOption(optionIndex) {
            userAnswers[currentQuestion] = optionIndex;
            showQuestion(currentQuestion);
        }

        // Move to the next question
        function nextQuestion() {
            if (userAnswers[currentQuestion] === undefined) return;
            
            if (currentQuestion < questions.length - 1) {
                currentQuestion++;
                showQuestion(currentQuestion);
            } else {
                calculateResults();
                showResults();
            }
            
            updateProgress();
        }

        // Move to the previous question
        function previousQuestion() {
            if (currentQuestion > 0) {
                currentQuestion--;
                showQuestion(currentQuestion);
                updateProgress();
            }
        }

        // Update progress bar and text
        function updateProgress() {
            const progress = ((currentQuestion + 1) / questions.length) * 100;
            document.getElementById('progress-fill').style.width = progress + '%';
            document.getElementById('current-question').textContent = currentQuestion + 1;
            document.getElementById('progress-percent').textContent = Math.round(progress) + '%';
        }

        // Calculate risk score and profile
        function calculateResults() {
            totalScore = 0;
            
            userAnswers.forEach((answerIndex, questionIndex) => {
                if (answerIndex !== undefined) {
                    totalScore += questions[questionIndex].options[answerIndex].score;
                }
            });
            
            // Convert to 0-100 scale
            totalScore = Math.round((totalScore / (questions.length * 5)) * 100);
        }

        // Display the results
        function showResults() {
            // Determine risk profile
            let riskLevel, riskDescription, portfolioType, expectedReturn, maxDrawdown;
            let indicatorPosition;
            
            if (totalScore <= 30) {
                riskLevel = "Conservative";
                riskDescription = "You prefer safety and stability over high returns";
                portfolioType = "Income";
                expectedReturn = "4-6%";
                maxDrawdown = "-10%";
                indicatorPosition = "10%";
            } else if (totalScore <= 60) {
                riskLevel = "Moderate";
                riskDescription = "You balance growth potential with risk management";
                portfolioType = "Balanced";
                expectedReturn = "6-8%";
                maxDrawdown = "-15%";
                indicatorPosition = "50%";
            } else {
                riskLevel = "Aggressive";
                riskDescription = "You're comfortable with volatility for higher potential returns";
                portfolioType = "Growth";
                expectedReturn = "8-10%";
                maxDrawdown = "-25%";
                indicatorPosition = "90%";
            }
            
            // Update results display
            document.getElementById('risk-level').textContent = riskLevel;
            document.getElementById('risk-description').textContent = riskDescription;
            document.getElementById('risk-score').textContent = totalScore + '/100';
            document.getElementById('portfolio-type').textContent = portfolioType;
            document.getElementById('expected-return').textContent = expectedReturn;
            document.getElementById('max-drawdown').textContent = maxDrawdown;
            document.getElementById('risk-indicator').style.left = indicatorPosition;
            
            // Update portfolio allocation based on risk profile
            updatePortfolioAllocation(riskLevel);
            
            // Show completion screen in questionnaire section
            document.querySelector('.questionnaire-section').innerHTML = `
                <div class="completion-screen">
                    <div class="completion-icon">
                        <i class="fas fa-check-circle"></i>
                    </div>
                    <div class="completion-title">Assessment Complete!</div>
                    <div class="completion-text">
                        Your risk tolerance has been evaluated. Review your personalized investment recommendations.
                    </div>
                    <button class="nav-btn" onclick="resetCalculator()">
                        <i class="fas fa-redo"></i> Retake Assessment
                    </button>
                </div>
            `;
        }

        // Update portfolio allocation based on risk profile
        function updatePortfolioAllocation(riskLevel) {
            let allocationData;
            
            if (riskLevel === "Conservative") {
                allocationData = [
                    { asset: "Cash & Equivalents", allocation: 20, color: "#2ecc71" },
                    { asset: "Bonds", allocation: 50, color: "#3498db" },
                    { asset: "Large Cap Stocks", allocation: 20, color: "#9b59b6" },
                    { asset: "International Stocks", allocation: 10, color: "#e74c3c" }
                ];
            } else if (riskLevel === "Moderate") {
                allocationData = [
                    { asset: "Cash & Equivalents", allocation: 10, color: "#2ecc71" },
                    { asset: "Bonds", allocation: 40, color: "#3498db" },
                    { asset: "Large Cap Stocks", allocation: 30, color: "#9b59b6" },
                    { asset: "International Stocks", allocation: 15, color: "#e74c3c" },
                    { asset: "Small Cap Stocks", allocation: 5, color: "#f39c12" }
                ];
            } else {
                allocationData = [
                    { asset: "Cash & Equivalents", allocation: 5, color: "#2ecc71" },
                    { asset: "Bonds", allocation: 20, color: "#3498db" },
                    { asset: "Large Cap Stocks", allocation: 35, color: "#9b59b6" },
                    { asset: "International Stocks", allocation: 25, color: "#e74c3c" },
                    { asset: "Small Cap Stocks", allocation: 10, color: "#f39c12" },
                    { asset: "Emerging Markets", allocation: 5, color: "#1abc9c" }
                ];
            }
            
            // Update allocation table
            const allocationBody = document.getElementById('allocation-body');
            allocationBody.innerHTML = '';
            
            allocationData.forEach(item => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${item.asset}</td>
                    <td>
                        <div class="allocation-bar">
                            <div class="allocation-fill" style="width: ${item.allocation}%; background: ${item.color};"></div>
                        </div>
                        <span>${item.allocation}%</span>
                    </td>
                    <td>${getRiskLevelForAsset(item.asset)}</td>
                `;
                allocationBody.appendChild(row);
            });
            
            // Update portfolio chart
            updatePortfolioChart(allocationData);
        }

        // Get risk level for an asset class
        function getRiskLevelForAsset(asset) {
            switch(asset) {
                case "Cash & Equivalents": return "Low";
                case "Bonds": return "Low-Medium";
                case "Large Cap Stocks": return "Medium";
                case "International Stocks": return "Medium-High";
                case "Small Cap Stocks": return "High";
                case "Emerging Markets": return "Very High";
                default: return "Medium";
            }
        }

        // Update the portfolio chart
        function updatePortfolioChart(allocationData) {
            const ctx = document.getElementById('portfolioChart').getContext('2d');
            
            if (portfolioChart) {
                portfolioChart.destroy();
            }
            
            const labels = allocationData.map(item => item.asset);
            const data = allocationData.map(item => item.allocation);
            const colors = allocationData.map(item => item.color);
            
            portfolioChart = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: labels,
                    datasets: [{
                        data: data,
                        backgroundColor: colors,
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'bottom',
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return context.label + ': ' + context.raw + '%';
                                }
                            }
                        }
                    }
                }
            });
        }

        // Select an investment strategy
        function selectStrategy(strategy) {
            // Remove selected class from all strategies
            document.querySelectorAll('.strategy-card').forEach(card => {
                card.classList.remove('selected');
            });
            
            // Add selected class to clicked strategy
            event.currentTarget.classList.add('selected');
            
            // Update portfolio based on selected strategy
            updatePortfolioAllocation(strategy.charAt(0).toUpperCase() + strategy.slice(1));
            
            // Update risk level display
            if (strategy === 'conservative') {
                document.getElementById('risk-level').textContent = "Conservative";
                document.getElementById('risk-description').textContent = "You prefer safety and stability over high returns";
                document.getElementById('portfolio-type').textContent = "Income";
                document.getElementById('expected-return').textContent = "4-6%";
                document.getElementById('max-drawdown').textContent = "-10%";
                document.getElementById('risk-indicator').style.left = "10%";
                document.getElementById('risk-score').textContent = "25/100";
            } else if (strategy === 'moderate') {
                document.getElementById('risk-level').textContent = "Moderate";
                document.getElementById('risk-description').textContent = "You balance growth potential with risk management";
                document.getElementById('portfolio-type').textContent = "Balanced";
                document.getElementById('expected-return').textContent = "6-8%";
                document.getElementById('max-drawdown').textContent = "-15%";
                document.getElementById('risk-indicator').style.left = "50%";
                document.getElementById('risk-score').textContent = "50/100";
            } else {
                document.getElementById('risk-level').textContent = "Aggressive";
                document.getElementById('risk-description').textContent = "You're comfortable with volatility for higher potential returns";
                document.getElementById('portfolio-type').textContent = "Growth";
                document.getElementById('expected-return').textContent = "8-10%";
                document.getElementById('max-drawdown').textContent = "-25%";
                document.getElementById('risk-indicator').style.left = "90%";
                document.getElementById('risk-score').textContent = "75/100";
            }
        }

        // Reset the calculator
        function resetCalculator() {
            currentQuestion = 0;
            userAnswers = [];
            totalScore = 0;
            initQuestionnaire();
            
            // Reset strategy selection
            document.querySelectorAll('.strategy-card').forEach(card => {
                card.classList.remove('selected');
            });
        }

        // Initialize the calculator
        window.onload = function() {
            initQuestionnaire();
        };
    </script>
</body>
</html>
