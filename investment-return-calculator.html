<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Investment Return Calculator - Financial Tools</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 50%, #6dd5ed 100%);
            color: #333;
            line-height: 1.6;
            min-height: 100vh;
            padding: 20px;
        }

        .calculator-container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.15);
            overflow: hidden;
        }

        .calculator-header {
            background: #2c3e50;
            color: white;
            padding: 30px;
            text-align: center;
        }

        .calculator-header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .calculator-header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .calculator-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            padding: 40px;
        }

        @media (max-width: 768px) {
            .calculator-content {
                grid-template-columns: 1fr;
            }
        }

        .input-section {
            background: #f8f9fa;
            padding: 30px;
            border-radius: 10px;
            border: 1px solid #e9ecef;
        }

        .section-title {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
            color: #2c3e50;
            font-size: 1.4em;
        }

        .section-title i {
            color: #1e3c72;
        }

        .input-group {
            margin-bottom: 25px;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #2c3e50;
        }

        .input-group input, .input-group select {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        .input-group input:focus, .input-group select:focus {
            outline: none;
            border-color: #1e3c72;
        }

        .range-container {
            margin-top: 10px;
        }

        .range-labels {
            display: flex;
            justify-content: space-between;
            margin-top: 5px;
            font-size: 0.9em;
            color: #6c757d;
        }

        .toggle-container {
            display: flex;
            gap: 15px;
            margin-top: 10px;
        }

        .toggle-option {
            flex: 1;
            text-align: center;
            padding: 10px;
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .toggle-option.active {
            background: #1e3c72;
            color: white;
            border-color: #1e3c72;
        }

        .calculate-btn {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 50%, #6dd5ed 100%);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s;
            margin-top: 20px;
        }

        .calculate-btn:hover {
            transform: translateY(-2px);
        }

        .results-section {
            background: white;
            padding: 30px;
            border-radius: 10px;
            border: 1px solid #e9ecef;
        }

        .investment-summary {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
        }

        .future-value {
            font-size: 3em;
            font-weight: 800;
            margin: 10px 0;
            color: #1e3c72;
        }

        .growth-amount {
            font-size: 1.2em;
            color: #6c757d;
        }

        .results-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }

        .result-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            border-left: 4px solid #1e3c72;
        }

        .result-card h3 {
            font-size: 0.9em;
            color: #6c757d;
            margin-bottom: 10px;
        }

        .result-card .value {
            font-size: 1.8em;
            font-weight: 700;
            color: #2c3e50;
        }

        .chart-container {
            height: 300px;
            margin: 30px 0;
        }

        .breakdown-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        .breakdown-table th,
        .breakdown-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #e9ecef;
        }

        .breakdown-table th {
            background: #f8f9fa;
            font-weight: 600;
            color: #2c3e50;
        }

        .insights-section {
            background: #e8f4fd;
            padding: 25px;
            border-radius: 10px;
            margin-top: 30px;
            border-left: 4px solid #3498db;
        }

        .insights-section h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .insight-item {
            margin-bottom: 15px;
            padding-left: 20px;
            border-left: 3px solid #1e3c72;
        }

        .action-buttons {
            display: flex;
            gap: 15px;
            margin-top: 30px;
        }

        .print-btn, .reset-btn {
            padding: 12px 25px;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s;
        }

        .print-btn {
            background: #3498db;
            color: white;
        }

        .reset-btn {
            background: #95a5a6;
            color: white;
        }

        .print-btn:hover, .reset-btn:hover {
            transform: translateY(-2px);
        }

        .scenario-section {
            margin-top: 30px;
        }

        .scenario-chart {
            height: 250px;
            margin-top: 20px;
        }

        .tab-container {
            margin-top: 20px;
        }

        .tabs {
            display: flex;
            border-bottom: 1px solid #e9ecef;
        }

        .tab {
            padding: 10px 20px;
            cursor: pointer;
            border-bottom: 3px solid transparent;
        }

        .tab.active {
            border-bottom: 3px solid #1e3c72;
            font-weight: 600;
            color: #1e3c72;
        }

        .tab-content {
            padding: 20px 0;
        }

        .tab-pane {
            display: none;
        }

        .tab-pane.active {
            display: block;
        }

        .scenario-comparison {
            background: #e8f4fd;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
        }

        .milestone-section {
            margin-top: 30px;
        }

        .milestone-list {
            margin-top: 15px;
        }

        .milestone-item {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid #e9ecef;
        }

        .milestone-year {
            font-weight: 600;
            color: #2c3e50;
        }

        .milestone-value {
            font-weight: 600;
            color: #1e3c72;
        }

        .contribution-breakdown {
            margin-top: 30px;
        }

        .breakdown-chart {
            height: 250px;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <div class="calculator-container">
        <div class="calculator-header">
            <h1>Investment Return Calculator</h1>
            <p>Project your investment growth and compare different strategies</p>
        </div>

        <div class="calculator-content">
            <div class="input-section">
                <div class="section-title">
                    <i class="fas fa-chart-line"></i>
                    <h2>Investment Details</h2>
                </div>
                
                <div class="input-group">
                    <label for="initial-investment">Initial Investment ($)</label>
                    <input type="number" id="initial-investment" value="10000" min="0" step="100">
                </div>

                <div class="input-group">
                    <label for="monthly-contribution">Monthly Contribution ($)</label>
                    <input type="number" id="monthly-contribution" value="500" min="0" step="10">
                </div>

                <div class="input-group">
                    <label for="investment-period">Investment Period (Years)</label>
                    <input type="number" id="investment-period" value="20" min="1" max="50">
                    <div class="range-container">
                        <input type="range" id="investment-period-range" min="1" max="50" value="20">
                        <div class="range-labels">
                            <span>1 year</span>
                            <span>50 years</span>
                        </div>
                    </div>
                </div>

                <div class="input-group">
                    <label for="expected-return">Expected Annual Return (%)</label>
                    <input type="number" id="expected-return" value="7" min="0.1" max="30" step="0.1">
                    <div class="range-container">
                        <input type="range" id="expected-return-range" min="1" max="20" value="7" step="0.1">
                        <div class="range-labels">
                            <span>1%</span>
                            <span>20%</span>
                        </div>
                    </div>
                </div>

                <div class="section-title" style="margin-top: 30px;">
                    <i class="fas fa-cogs"></i>
                    <h2>Advanced Settings</h2>
                </div>

                <div class="input-group">
                    <label for="inflation-rate">Inflation Rate (%)</label>
                    <input type="number" id="inflation-rate" value="2.5" min="0" max="10" step="0.1">
                </div>

                <div class="input-group">
                    <label for="tax-rate">Tax Rate on Gains (%)</label>
                    <input type="number" id="tax-rate" value="15" min="0" max="50" step="0.1">
                </div>

                <div class="input-group">
                    <label for="compounding-frequency">Compounding Frequency</label>
                    <select id="compounding-frequency">
                        <option value="annually">Annually</option>
                        <option value="quarterly">Quarterly</option>
                        <option value="monthly" selected>Monthly</option>
                        <option value="daily">Daily</option>
                    </select>
                </div>

                <button class="calculate-btn" onclick="calculateInvestment()">
                    <i class="fas fa-calculator"></i> Calculate Investment Growth
                </button>

                <div class="scenario-comparison">
                    <h3>Compare Scenarios</h3>
                    <div class="input-group">
                        <label for="compare-return">Alternative Return Rate (%)</label>
                        <input type="number" id="compare-return" value="5" min="0.1" max="30" step="0.1">
                    </div>
                    <button class="calculate-btn" onclick="compareScenarios()" style="margin-top: 10px; background: #2ecc71;">
                        Compare Scenarios
                    </button>
                </div>
            </div>

            <div class="results-section">
                <div class="section-title">
                    <i class="fas fa-chart-bar"></i>
                    <h2>Investment Projection</h2>
                </div>
                
                <div class="investment-summary">
                    <h3>Future Value of Your Investment</h3>
                    <div class="future-value" id="future-value">$312,909</div>
                    <div class="growth-amount" id="growth-amount">$192,909 total growth</div>
                </div>

                <div class="results-grid">
                    <div class="result-card">
                        <h3>Total Contributions</h3>
                        <div class="value" id="total-contributions">$120,000</div>
                    </div>
                    <div class="result-card">
                        <h3>Total Interest Earned</h3>
                        <div class="value" id="total-interest">$192,909</div>
                    </div>
                    <div class="result-card">
                        <h3>After-Tax Value</h3>
                        <div class="value" id="after-tax-value">$279,973</div>
                    </div>
                    <div class="result-card">
                        <h3>Inflation-Adjusted Value</h3>
                        <div class="value" id="inflation-adjusted">$190,724</div>
                    </div>
                </div>

                <div class="chart-container">
                    <canvas id="growthChart"></canvas>
                </div>

                <div class="tab-container">
                    <div class="tabs">
                        <div class="tab active" onclick="switchTab(event, 'breakdown')">Value Breakdown</div>
                        <div class="tab" onclick="switchTab(event, 'milestones')">Milestones</div>
                        <div class="tab" onclick="switchTab(event, 'scenarios')">Scenario Comparison</div>
                    </div>
                    <div class="tab-content">
                        <div class="tab-pane active" id="breakdown-tab">
                            <div class="contribution-breakdown">
                                <h3>Investment Composition</h3>
                                <div class="breakdown-chart">
                                    <canvas id="breakdownChart"></canvas>
                                </div>
                                <table class="breakdown-table">
                                    <thead>
                                        <tr>
                                            <th>Component</th>
                                            <th>Amount</th>
                                            <th>Percentage</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>Initial Investment</td>
                                            <td id="initial-amount">$10,000</td>
                                            <td id="initial-percent">3.2%</td>
                                        </tr>
                                        <tr>
                                            <td>Regular Contributions</td>
                                            <td id="contributions-amount">$110,000</td>
                                            <td id="contributions-percent">35.1%</td>
                                        </tr>
                                        <tr>
                                            <td>Investment Growth</td>
                                            <td id="growth-amount-cell">$192,909</td>
                                            <td id="growth-percent">61.7%</td>
                                        </tr>
                                        <tr style="font-weight: 600;">
                                            <td>Total Value</td>
                                            <td id="total-value-cell">$312,909</td>
                                            <td>100%</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <div class="tab-pane" id="milestones-tab">
                            <div class="milestone-section">
                                <h3>Investment Growth Milestones</h3>
                                <div class="milestone-list">
                                    <div class="milestone-item">
                                        <span class="milestone-year">5 years</span>
                                        <span class="milestone-value" id="milestone-5">$47,661</span>
                                    </div>
                                    <div class="milestone-item">
                                        <span class="milestone-year">10 years</span>
                                        <span class="milestone-value" id="milestone-10">$98,853</span>
                                    </div>
                                    <div class="milestone-item">
                                        <span class="milestone-year">15 years</span>
                                        <span class="milestone-value" id="milestone-15">$173,596</span>
                                    </div>
                                    <div class="milestone-item">
                                        <span class="milestone-year">20 years</span>
                                        <span class="milestone-value" id="milestone-20">$312,909</span>
                                    </div>
                                    <div class="milestone-item">
                                        <span class="milestone-year">25 years</span>
                                        <span class="milestone-value" id="milestone-25">$548,334</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="tab-pane" id="scenarios-tab">
                            <div class="scenario-section">
                                <h3>Return Rate Comparison</h3>
                                <div class="scenario-chart">
                                    <canvas id="scenarioChart"></canvas>
                                </div>
                                <table class="breakdown-table">
                                    <thead>
                                        <tr>
                                            <th>Return Rate</th>
                                            <th>Future Value</th>
                                            <th>Difference</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>5% (Conservative)</td>
                                            <td id="conservative-value">$225,457</td>
                                            <td id="conservative-diff">-$87,452</td>
                                        </tr>
                                        <tr>
                                            <td>7% (Moderate)</td>
                                            <td id="moderate-value">$312,909</td>
                                            <td>Base Scenario</td>
                                        </tr>
                                        <tr>
                                            <td>9% (Aggressive)</td>
                                            <td id="aggressive-value">$437,748</td>
                                            <td id="aggressive-diff">+$124,839</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="insights-section">
                    <h3><i class="fas fa-lightbulb"></i> Investment Insights</h3>
                    <div class="insight-item">
                        <strong>Compound Growth:</strong> Your money grows exponentially over time thanks to compounding returns.
                    </div>
                    <div class="insight-item">
                        <strong>Consistency Matters:</strong> Regular contributions significantly boost your final investment value.
                    </div>
                    <div class="insight-item">
                        <strong>Time Horizon:</strong> The longer your investment period, the more dramatic the compounding effect.
                    </div>
                    <div class="insight-item">
                        <strong>Inflation Impact:</strong> Your real purchasing power may be less than the nominal investment value.
                    </div>
                </div>

                <div class="action-buttons">
                    <button class="print-btn" onclick="window.print()">
                        <i class="fas fa-print"></i> Print Results
                    </button>
                    <button class="reset-btn" onclick="resetCalculator()">
                        <i class="fas fa-redo"></i> Reset Calculator
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        let growthChart, breakdownChart, scenarioChart;

        // Sync range and number inputs for investment period
        document.getElementById('investment-period-range').addEventListener('input', function() {
            document.getElementById('investment-period').value = this.value;
            calculateInvestment();
        });

        document.getElementById('investment-period').addEventListener('input', function() {
            document.getElementById('investment-period-range').value = this.value;
            calculateInvestment();
        });

        // Sync range and number inputs for expected return
        document.getElementById('expected-return-range').addEventListener('input', function() {
            document.getElementById('expected-return').value = this.value;
            calculateInvestment();
        });

        document.getElementById('expected-return').addEventListener('input', function() {
            document.getElementById('expected-return-range').value = this.value;
            calculateInvestment();
        });

        // Switch between tabs
        function switchTab(event, tabName) {
            // Update tab active states
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // Update tab content visibility
            document.querySelectorAll('.tab-pane').forEach(pane => {
                pane.classList.remove('active');
            });
            document.getElementById(`${tabName}-tab`).classList.add('active');
        }

        // Calculate investment growth
        function calculateInvestment() {
            // Get input values
            const initialInvestment = parseFloat(document.getElementById('initial-investment').value) || 0;
            const monthlyContribution = parseFloat(document.getElementById('monthly-contribution').value) || 0;
            const investmentPeriod = parseInt(document.getElementById('investment-period').value) || 0;
            const expectedReturn = parseFloat(document.getElementById('expected-return').value) / 100 || 0;
            const inflationRate = parseFloat(document.getElementById('inflation-rate').value) / 100 || 0;
            const taxRate = parseFloat(document.getElementById('tax-rate').value) / 100 || 0;
            const compounding = document.getElementById('compounding-frequency').value;
            
            // Determine compounding periods per year
            let compoundsPerYear;
            switch(compounding) {
                case 'daily': compoundsPerYear = 365; break;
                case 'monthly': compoundsPerYear = 12; break;
                case 'quarterly': compoundsPerYear = 4; break;
                case 'annually': compoundsPerYear = 1; break;
            }
            
            // Calculate monthly rate for compounding
            const monthlyRate = expectedReturn / 12;
            
            // Calculate future value using future value of annuity formula
            let futureValue = initialInvestment * Math.pow(1 + monthlyRate, investmentPeriod * 12);
            
            // Add monthly contributions
            if (monthlyContribution > 0) {
                futureValue += monthlyContribution * (Math.pow(1 + monthlyRate, investmentPeriod * 12) - 1) / monthlyRate;
            }
            
            // Calculate total contributions
            const totalContributions = initialInvestment + (monthlyContribution * investmentPeriod * 12);
            
            // Calculate total interest
            const totalInterest = futureValue - totalContributions;
            
            // Calculate after-tax value (assuming capital gains tax on growth)
            const afterTaxValue = totalContributions + (totalInterest * (1 - taxRate));
            
            // Calculate inflation-adjusted value
            const inflationAdjustedValue = futureValue / Math.pow(1 + inflationRate, investmentPeriod);
            
            // Update results
            document.getElementById('future-value').textContent = `${Math.round(futureValue).toLocaleString()}`;
            document.getElementById('growth-amount').textContent = `${Math.round(totalInterest).toLocaleString()} total growth`;
            document.getElementById('total-contributions').textContent = `${Math.round(totalContributions).toLocaleString()}`;
            document.getElementById('total-interest').textContent = `${Math.round(totalInterest).toLocaleString()}`;
            document.getElementById('after-tax-value').textContent = `${Math.round(afterTaxValue).toLocaleString()}`;
            document.getElementById('inflation-adjusted').textContent = `${Math.round(inflationAdjustedValue).toLocaleString()}`;
            
            // Update breakdown table
            const initialPercent = (initialInvestment / futureValue * 100).toFixed(1);
            const contributionsPercent = ((monthlyContribution * investmentPeriod * 12) / futureValue * 100).toFixed(1);
            const growthPercent = (totalInterest / futureValue * 100).toFixed(1);
            
            document.getElementById('initial-amount').textContent = `${Math.round(initialInvestment).toLocaleString()}`;
            document.getElementById('initial-percent').textContent = `${initialPercent}%`;
            document.getElementById('contributions-amount').textContent = `${Math.round(monthlyContribution * investmentPeriod * 12).toLocaleString()}`;
            document.getElementById('contributions-percent').textContent = `${contributionsPercent}%`;
            document.getElementById('growth-amount-cell').textContent = `${Math.round(totalInterest).toLocaleString()}`;
            document.getElementById('growth-percent').textContent = `${growthPercent}%`;
            document.getElementById('total-value-cell').textContent = `${Math.round(futureValue).toLocaleString()}`;
            
            // Update milestones
            updateMilestones(initialInvestment, monthlyContribution, expectedReturn, investmentPeriod);
            
            // Update charts
            updateGrowthChart(initialInvestment, monthlyContribution, expectedReturn, investmentPeriod);
            updateBreakdownChart(initialInvestment, monthlyContribution, investmentPeriod, totalInterest);
        }

        // Update investment milestones
        function updateMilestones(initial, monthly, rate, years) {
            const milestones = [5, 10, 15, 20, 25];
            const monthlyRate = rate / 12;
            
            milestones.forEach(years => {
                if (years <= document.getElementById('investment-period').value) {
                    let value = initial * Math.pow(1 + monthlyRate, years * 12);
                    
                    if (monthly > 0) {
                        value += monthly * (Math.pow(1 + monthlyRate, years * 12) - 1) / monthlyRate;
                    }
                    
                    document.getElementById(`milestone-${years}`).textContent = `${Math.round(value).toLocaleString()}`;
                } else {
                    document.getElementById(`milestone-${years}`).textContent = 'N/A';
                }
            });
        }

        // Compare different return scenarios
        function compareScenarios() {
            const initialInvestment = parseFloat(document.getElementById('initial-investment').value);
            const monthlyContribution = parseFloat(document.getElementById('monthly-contribution').value);
            const investmentPeriod = parseInt(document.getElementById('investment-period').value);
            const baseReturn = parseFloat(document.getElementById('expected-return').value) / 100;
            const compareReturn = parseFloat(document.getElementById('compare-return').value) / 100;
            
            // Calculate values for different scenarios
            const conservativeReturn = Math.min(baseReturn, compareReturn) - 0.02;
            const aggressiveReturn = Math.max(baseReturn, compareReturn) + 0.02;
            
            const monthlyRateBase = baseReturn / 12;
            const monthlyRateConservative = conservativeReturn / 12;
            const monthlyRateAggressive = aggressiveReturn / 12;
            
            // Calculate future values
            let baseValue = initialInvestment * Math.pow(1 + monthlyRateBase, investmentPeriod * 12);
            let conservativeValue = initialInvestment * Math.pow(1 + monthlyRateConservative, investmentPeriod * 12);
            let aggressiveValue = initialInvestment * Math.pow(1 + monthlyRateAggressive, investmentPeriod * 12);
            
            if (monthlyContribution > 0) {
                baseValue += monthlyContribution * (Math.pow(1 + monthlyRateBase, investmentPeriod * 12) - 1) / monthlyRateBase;
                conservativeValue += monthlyContribution * (Math.pow(1 + monthlyRateConservative, investmentPeriod * 12) - 1) / monthlyRateConservative;
                aggressiveValue += monthlyContribution * (Math.pow(1 + monthlyRateAggressive, investmentPeriod * 12) - 1) / monthlyRateAggressive;
            }
            
            // Update comparison table
            document.getElementById('conservative-value').textContent = `${Math.round(conservativeValue).toLocaleString()}`;
            document.getElementById('moderate-value').textContent = `${Math.round(baseValue).toLocaleString()}`;
            document.getElementById('aggressive-value').textContent = `${Math.round(aggressiveValue).toLocaleString()}`;
            
            const conservativeDiff = conservativeValue - baseValue;
            const aggressiveDiff = aggressiveValue - baseValue;
            
            document.getElementById('conservative-diff').textContent = `${Math.round(conservativeDiff).toLocaleString()}`;
            document.getElementById('aggressive-diff').textContent = `+${Math.round(aggressiveDiff).toLocaleString()}`;
            
            // Update scenario chart
            updateScenarioChart(initialInvestment, monthlyContribution, investmentPeriod, conservativeReturn, baseReturn, aggressiveReturn);
        }

        // Update the growth chart
        function updateGrowthChart(initial, monthly, rate, years) {
            const ctx = document.getElementById('growthChart').getContext('2d');
            
            if (growthChart) {
                growthChart.destroy();
            }
            
            // Generate data points for each year
            const labels = [];
            const contributionData = [];
            const interestData = [];
            const totalData = [];
            
            let balance = initial;
            const monthlyRate = rate / 12;
            
            for (let year = 0; year <= years; year++) {
                labels.push(`Year ${year}`);
                
                if (year === 0) {
                    contributionData.push(initial);
                    interestData.push(0);
                    totalData.push(initial);
                } else {
                    // Calculate growth for the year
                    for (let month = 1; month <= 12; month++) {
                        const interest = balance * monthlyRate;
                        balance += interest + monthly;
                    }
                    
                    const totalContributions = initial + (monthly * 12 * year);
                    const totalInterest = balance - totalContributions;
                    
                    contributionData.push(totalContributions);
                    interestData.push(totalInterest);
                    totalData.push(balance);
                }
            }
            
            growthChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [
                        {
                            label: 'Total Contributions',
                            data: contributionData,
                            borderColor: '#1e3c72',
                            backgroundColor: 'rgba(30, 60, 114, 0.1)',
                            fill: false,
                            borderDash: [5, 5]
                        },
                        {
                            label: 'Interest Earned',
                            data: interestData,
                            borderColor: '#2a5298',
                            backgroundColor: 'rgba(42, 82, 152, 0.1)',
                            fill: '+1'
                        },
                        {
                            label: 'Total Value',
                            data: totalData,
                            borderColor: '#6dd5ed',
                            backgroundColor: 'rgba(109, 213, 237, 0.1)',
                            fill: false,
                            borderWidth: 3
                        }
                    ]
                },
                options: {
                    responsive: true,
                    plugins: {
                        title: {
                            display: true,
                            text: 'Investment Growth Over Time'
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Amount ($)'
                            }
                        }
                    }
                }
            });
        }

        // Update the breakdown chart
        function updateBreakdownChart(initial, monthly, years, interest) {
            const ctx = document.getElementById('breakdownChart').getContext('2d');
            
            if (breakdownChart) {
                breakdownChart.destroy();
            }
            
            const contributions = monthly * years * 12;
            
            breakdownChart = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['Initial Investment', 'Regular Contributions', 'Investment Growth'],
                    datasets: [{
                        data: [initial, contributions, interest],
                        backgroundColor: [
                            '#1e3c72',
                            '#2a5298',
                            '#6dd5ed'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'bottom',
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const total = initial + contributions + interest;
                                    const percentage = ((context.raw / total) * 100).toFixed(1);
                                    return `${context.raw.toLocaleString()} (${percentage}%)`;
                                }
                            }
                        }
                    }
                }
            });
        }

        // Update the scenario comparison chart
        function updateScenarioChart(initial, monthly, years, conservative, moderate, aggressive) {
            const ctx = document.getElementById('scenarioChart').getContext('2d');
            
            if (scenarioChart) {
                scenarioChart.destroy();
            }
            
            // Generate data points for each scenario
            const labels = [];
            const conservativeData = [];
            const moderateData = [];
            const aggressiveData = [];
            
            for (let year = 0; year <= years; year += 5) {
                labels.push(`Year ${year}`);
                
                if (year === 0) {
                    conservativeData.push(initial);
                    moderateData.push(initial);
                    aggressiveData.push(initial);
                } else {
                    const conservativeValue = calculateFutureValue(initial, monthly, conservative, year);
                    const moderateValue = calculateFutureValue(initial, monthly, moderate, year);
                    const aggressiveValue = calculateFutureValue(initial, monthly, aggressive, year);
                    
                    conservativeData.push(conservativeValue);
                    moderateData.push(moderateValue);
                    aggressiveData.push(aggressiveValue);
                }
            }
            
            scenarioChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [
                        {
                            label: `${(conservative * 100).toFixed(1)}% Return`,
                            data: conservativeData,
                            backgroundColor: 'rgba(231, 76, 60, 0.8)'
                        },
                        {
                            label: `${(moderate * 100).toFixed(1)}% Return`,
                            data: moderateData,
                            backgroundColor: 'rgba(52, 152, 219, 0.8)'
                        },
                        {
                            label: `${(aggressive * 100).toFixed(1)}% Return`,
                            data: aggressiveData,
                            backgroundColor: 'rgba(46, 204, 113, 0.8)'
                        }
                    ]
                },
                options: {
                    responsive: true,
                    plugins: {
                        title: {
                            display: true,
                            text: 'Investment Value by Return Scenario'
                        }
                    },
                    scales: {
                        x: {
                            stacked: false,
                        },
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Amount ($)'
                            }
                        }
                    }
                }
            });
        }

        // Helper function to calculate future value
        function calculateFutureValue(initial, monthly, rate, years) {
            const monthlyRate = rate / 12;
            let futureValue = initial * Math.pow(1 + monthlyRate, years * 12);
            
            if (monthly > 0) {
                futureValue += monthly * (Math.pow(1 + monthlyRate, years * 12) - 1) / monthlyRate;
            }
            
            return futureValue;
        }

        // Reset the calculator
        function resetCalculator() {
            document.getElementById('initial-investment').value = '10000';
            document.getElementById('monthly-contribution').value = '500';
            document.getElementById('investment-period').value = '20';
            document.getElementById('expected-return').value = '7';
            document.getElementById('inflation-rate').value = '2.5';
            document.getElementById('tax-rate').value = '15';
            document.getElementById('compounding-frequency').value = 'monthly';
            document.getElementById('compare-return').value = '5';
            
            // Update range sliders
            document.getElementById('investment-period-range').value = '20';
            document.getElementById('expected-return-range').value = '7';
            
            calculateInvestment();
        }

        // Initialize the calculator
        document.addEventListener('DOMContentLoaded', function() {
            calculateInvestment();
            compareScenarios();
        });
    </script>
</body>
</html>
